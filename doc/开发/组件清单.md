# 组件清单

## 已规划组件

| 组件名 | 功能说明 | 优先级 |
|--------|----------|--------|
| system | 时区、目录创建、DNS 配置 | 高 |
| network | BBR 启用、sysctl 内核参数优化 | 高 |
| packages | 基础依赖包批量安装 | 高 |
| php | PHP-FPM 安装、php.ini 配置 | 中 |
| openresty | OpenResty 编译/安装、systemd 服务 | 中 |
| mysql | MySQL 8.0 安装、自动生成 root 密码 | 中 |
| redis | Redis 安装与服务启用 | 中 |
| fail2ban | Fail2ban 安装与 IP 白名单 | 低 |
| firewall | iptables 规则、端口开放、持久化 | 低 |

---

## 组件接口

每个组件需实现：

```
install()   - 执行安装
check()     - 健康检查
rollback()  - 回滚（可选）
```

---

## 组件依赖关系（草案）

```
system ──┬── network
         └── packages ──┬── php
                        ├── openresty
                        ├── mysql
                        ├── redis
                        └── fail2ban ── firewall
```

---

## 命令示例

```bash
# 安装单个组件
./install.sh --mysql

# 安装多个组件
./install.sh --mysql --redis --php

# 编译模式安装 openresty
./install.sh --openresty --mode compile

# 快速模式全量安装
./install.sh --all --mode fast
```
