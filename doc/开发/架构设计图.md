# Trojan-Go æ¶æ„è®¾è®¡

## ğŸ“ ç›®å½•ç»“æ„

```
scripts/debian12/
â”œâ”€â”€ ssl.sh â­                        # SSL é€šç”¨æ¨¡å—ï¼ˆæå‡åˆ°ä¸Šå±‚ï¼‰
â”‚   â”œâ”€â”€ install_certbot()           # å®‰è£… certbot
â”‚   â”œâ”€â”€ request_ssl_cert()          # ç”³è¯·è¯ä¹¦ï¼ˆå¸¦å‚æ•°éªŒè¯ï¼‰
â”‚   â”œâ”€â”€ check_cert_exists()         # è¯ä¹¦å­˜åœ¨æ€§æ£€æŸ¥
â”‚   â”œâ”€â”€ setup_auto_renew()          # è®¾ç½®è‡ªåŠ¨ç»­æœŸ
â”‚   â””â”€â”€ show_cert_info()            # æ˜¾ç¤ºè¯ä¹¦ä¿¡æ¯
â”‚
â”œâ”€â”€ trojan-go.sh                    # å…¥å£è„šæœ¬
â”‚   â””â”€â”€ exec main.sh "$@"           # è½¬å‘æ‰€æœ‰å‘½ä»¤
â”‚
â””â”€â”€ trojan-go/                      # Trojan-Go æ¨¡å—ç›®å½•
    â”œâ”€â”€ main.sh                     # ä¸»æµç¨‹æ§åˆ¶å™¨
    â”‚   â”œâ”€â”€ interactive_setup()     # äº¤äº’å¼é…ç½®
    â”‚   â”œâ”€â”€ install()               # å®‰è£…ä¸»æµç¨‹
    â”‚   â”œâ”€â”€ save_install_info()     # ä¿å­˜å®‰è£…ä¿¡æ¯
    â”‚   â””â”€â”€ show_complete_info()    # æ˜¾ç¤ºå®Œæˆä¿¡æ¯
    â”‚
    â”œâ”€â”€ lib/                        # åŠŸèƒ½æ¨¡å—
    â”‚   â”œâ”€â”€ env.sh                  # ç¯å¢ƒæ£€æŸ¥
    â”‚   â”‚   â”œâ”€â”€ check_root()        # Root æƒé™æ£€æŸ¥
    â”‚   â”‚   â”œâ”€â”€ check_system()      # ç³»ç»Ÿç‰ˆæœ¬æ£€æŸ¥
    â”‚   â”‚   â”œâ”€â”€ validate_domain()   # åŸŸåæ ¼å¼éªŒè¯
    â”‚   â”‚   â”œâ”€â”€ check_domain_dns()  # DNS è§£ææ£€æŸ¥ï¼ˆå¸¦è¶…æ—¶ï¼‰
    â”‚   â”‚   â””â”€â”€ init_environment()  # åˆå§‹åŒ–ç¯å¢ƒ
    â”‚   â”‚
    â”‚   â”œâ”€â”€ nginx.sh                # Nginx ç®¡ç†
    â”‚   â”‚   â”œâ”€â”€ install_nginx()     # å®‰è£… OpenResty
    â”‚   â”‚   â”œâ”€â”€ create_nginx_service() # åˆ›å»º systemd service
    â”‚   â”‚   â”œâ”€â”€ configure_nginx_vhost_include() â­ # é…ç½® vhost å¼•å…¥
    â”‚   â”‚   â”œâ”€â”€ create_nginx_vhost() # åˆ›å»ºè™šæ‹Ÿä¸»æœºï¼ˆå¸¦éªŒè¯ï¼‰
    â”‚   â”‚   â”œâ”€â”€ create_fake_website() # åˆ›å»ºä¼ªè£…ç½‘ç«™
    â”‚   â”‚   â”œâ”€â”€ test_nginx_config() # æµ‹è¯•é…ç½®
    â”‚   â”‚   â””â”€â”€ reload_nginx()      # é‡è½½é…ç½®
    â”‚   â”‚
    â”‚   â”œâ”€â”€ trojan.sh               # Trojan-Go ç®¡ç†
    â”‚   â”‚   â”œâ”€â”€ install_trojan()    # å®‰è£…ï¼ˆå¸¦é‡è¯•ï¼‰
    â”‚   â”‚   â”œâ”€â”€ create_trojan_config() # åˆ›å»ºé…ç½®ï¼ˆå¸¦éªŒè¯ï¼‰
    â”‚   â”‚   â””â”€â”€ create_trojan_service() # åˆ›å»ºæœåŠ¡
    â”‚   â”‚
    â”‚   â””â”€â”€ service.sh              # æœåŠ¡ç®¡ç†
    â”‚       â”œâ”€â”€ cleanup_processes() # æ¸…ç†å­¤ç«‹è¿›ç¨‹
    â”‚       â”œâ”€â”€ start_services()    # å¯åŠ¨æœåŠ¡ï¼ˆå¸¦çŠ¶æ€æ£€æŸ¥ï¼‰
    â”‚       â”œâ”€â”€ stop_services()     # åœæ­¢æœåŠ¡
    â”‚       â”œâ”€â”€ restart_services()  # é‡å¯æœåŠ¡
    â”‚       â”œâ”€â”€ health_check()      # å¥åº·æ£€æŸ¥
    â”‚       â””â”€â”€ show_status()       # æ˜¾ç¤ºçŠ¶æ€
    â”‚
    â””â”€â”€ templates/                  # é…ç½®æ¨¡æ¿
        â””â”€â”€ nginx-vhost.conf        # Nginx è™šæ‹Ÿä¸»æœºæ¨¡æ¿
```

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·å‘½ä»¤å…¥å£                          â”‚
â”‚         bash scripts/debian12/trojan-go.sh install      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  trojan-go.sh (åŒ…è£…å™¨)                   â”‚
â”‚              exec main.sh "$@" (è½¬å‘)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 main.sh (ä¸»æµç¨‹æ§åˆ¶)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 1. åŠ è½½æ¨¡å—                                     â”‚    â”‚
â”‚  â”‚    â”œâ”€ lib/env.sh      (ç¯å¢ƒæ£€æŸ¥)               â”‚    â”‚
â”‚  â”‚    â”œâ”€ ../ssl.sh â­     (SSL é€šç”¨æ¨¡å—)           â”‚    â”‚
â”‚  â”‚    â”œâ”€ lib/nginx.sh    (Nginx ç®¡ç†)             â”‚    â”‚
â”‚  â”‚    â”œâ”€ lib/trojan.sh   (Trojan ç®¡ç†)            â”‚    â”‚
â”‚  â”‚    â””â”€ lib/service.sh  (æœåŠ¡ç®¡ç†)               â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚ 2. äº¤äº’å¼é…ç½®                                   â”‚    â”‚
â”‚  â”‚    â”œâ”€ è¾“å…¥åŸŸå â†’ validate_domain()             â”‚    â”‚
â”‚  â”‚    â”œâ”€ è¾“å…¥é‚®ç®±                                  â”‚    â”‚
â”‚  â”‚    â”œâ”€ ç”Ÿæˆå¯†ç  â†’ generate_password()           â”‚    â”‚
â”‚  â”‚    â””â”€ ç”Ÿæˆ WS è·¯å¾„ â†’ generate_password()       â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚ 3. å®‰è£…æµç¨‹ï¼ˆå¸¦é”™è¯¯å¤„ç†ï¼‰                      â”‚    â”‚
â”‚  â”‚    â”œâ”€ init_environment()                       â”‚    â”‚
â”‚  â”‚    â”œâ”€ check_domain_dns() || warn              â”‚    â”‚
â”‚  â”‚    â”œâ”€ install_certbot()                        â”‚    â”‚
â”‚  â”‚    â”œâ”€ request_ssl_cert() || exit               â”‚    â”‚
â”‚  â”‚    â”œâ”€ setup_auto_renew()                       â”‚    â”‚
â”‚  â”‚    â”œâ”€ install_nginx()                          â”‚    â”‚
â”‚  â”‚    â”œâ”€ create_nginx_vhost() || exit             â”‚    â”‚
â”‚  â”‚    â”œâ”€ install_trojan() || exit                 â”‚    â”‚
â”‚  â”‚    â”œâ”€ create_trojan_config() || exit           â”‚    â”‚
â”‚  â”‚    â”œâ”€ create_trojan_service()                  â”‚    â”‚
â”‚  â”‚    â”œâ”€ start_services() || exit                 â”‚    â”‚
â”‚  â”‚    â”œâ”€ save_install_info()                      â”‚    â”‚
â”‚  â”‚    â”œâ”€ health_check()                           â”‚    â”‚
â”‚  â”‚    â””â”€ show_complete_info()                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥
  â”‚
  â”œâ”€ åŸŸå â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”œâ”€ é‚®ç®±          â”‚
  â”œâ”€ å¯†ç  (è‡ªåŠ¨)    â”‚
  â””â”€ WSè·¯å¾„ (è‡ªåŠ¨)  â”‚
                   â”‚
                   â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ ç¯å¢ƒæ£€æŸ¥  â”‚
              â”‚ env.sh   â”‚
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”œâ”€ Root æƒé™ âœ“
                   â”œâ”€ ç³»ç»Ÿç‰ˆæœ¬ âœ“
                   â”œâ”€ åŸŸåæ ¼å¼ âœ“
                   â””â”€ DNS è§£æ âœ“
                   â”‚
                   â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ SSL è¯ä¹¦  â”‚
              â”‚ ssl.sh â­ â”‚
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”œâ”€ å®‰è£… certbot
                   â”œâ”€ ç”³è¯·è¯ä¹¦ (standalone)
                   â”œâ”€ è®¾ç½®ç»­æœŸ (systemd timer)
                   â””â”€ åˆ›å»ºé’©å­ (reload services)
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      Nginx         â”‚
         â”‚    nginx.sh        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”œâ”€ å®‰è£… OpenResty
                   â”œâ”€ åˆ›å»º service
                   â”œâ”€ åˆ›å»º vhost ç›®å½• â­
                   â”œâ”€ é…ç½® include â­
                   â”œâ”€ åˆ›å»ºè™šæ‹Ÿä¸»æœº
                   â””â”€ åˆ›å»ºä¼ªè£…ç½‘ç«™
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    Trojan-Go       â”‚
         â”‚    trojan.sh       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”œâ”€ ä¸‹è½½äºŒè¿›åˆ¶ (é‡è¯•3æ¬¡)
                   â”œâ”€ åˆ›å»ºé…ç½® (éªŒè¯å‚æ•°)
                   â””â”€ åˆ›å»º service
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    æœåŠ¡å¯åŠ¨        â”‚
         â”‚   service.sh       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”œâ”€ æ¸…ç†å­¤ç«‹è¿›ç¨‹
                   â”œâ”€ å¯åŠ¨ nginx (éªŒè¯çŠ¶æ€)
                   â”œâ”€ å¯åŠ¨ trojan-go (éªŒè¯çŠ¶æ€)
                   â””â”€ å¥åº·æ£€æŸ¥
                   â”‚
                   â–¼
              å®‰è£…å®Œæˆ âœ“
```

## ğŸ›¡ï¸ å¥å£®æ€§è®¾è®¡

### å‚æ•°éªŒè¯å±‚
```
ç”¨æˆ·è¾“å…¥ â†’ å‚æ•°éªŒè¯ â†’ æ ¼å¼æ£€æŸ¥ â†’ DNS éªŒè¯ â†’ ç»§ç»­æµç¨‹
            â†“ å¤±è´¥
          é”™è¯¯æç¤º
          é€€å‡ºå®‰è£…
```

### é”™è¯¯å¤„ç†å±‚
```
é…ç½®ä¿®æ”¹ â†’ å¤‡ä»½åŸæ–‡ä»¶ â†’ æ‰§è¡Œä¿®æ”¹ â†’ æµ‹è¯•é…ç½®
                         â†“ å¤±è´¥      â†“ å¤±è´¥
                       æ¢å¤å¤‡ä»½ â† æ¢å¤å¤‡ä»½
                         â†“
                      è¿”å›é”™è¯¯
```

### é‡è¯•æœºåˆ¶
```
ä¸‹è½½æ–‡ä»¶ â†’ å¤±è´¥ â†’ é‡è¯• (1/3) â†’ å¤±è´¥ â†’ é‡è¯• (2/3) â†’ å¤±è´¥ â†’ é‡è¯• (3/3)
            â†“                    â†“                    â†“
          ç»§ç»­ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç»§ç»­ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç»§ç»­
                                                      â†“ å¤±è´¥
                                                   è¿”å›é”™è¯¯
```

### çŠ¶æ€éªŒè¯
```
æ‰§è¡Œæ“ä½œ â†’ ç­‰å¾… 2 ç§’ â†’ æ£€æŸ¥çŠ¶æ€ â†’ is-active?
                                   â”œâ”€ Yes â†’ æˆåŠŸ âœ“
                                   â””â”€ No  â†’ å¤±è´¥
                                             â”œâ”€ æ˜¾ç¤ºæ—¥å¿—
                                             â”œâ”€ æ£€æŸ¥ç«¯å£
                                             â””â”€ è¿”å›é”™è¯¯
```

## ğŸ”Œ æ¨¡å—ä¾èµ–å…³ç³»

```
main.sh
  â”‚
  â”œâ”€ requires â”€â†’ lib/env.sh
  â”‚              â”œâ”€ check_root()
  â”‚              â”œâ”€ check_system()
  â”‚              â”œâ”€ validate_domain()
  â”‚              â””â”€ check_domain_dns()
  â”‚
  â”œâ”€ requires â”€â†’ ../ssl.sh â­ (é€šç”¨æ¨¡å—)
  â”‚              â”œâ”€ install_certbot()
  â”‚              â”œâ”€ request_ssl_cert()
  â”‚              â””â”€ setup_auto_renew()
  â”‚
  â”œâ”€ requires â”€â†’ lib/nginx.sh
  â”‚              â”œâ”€ depends on: ssl.sh (è¯ä¹¦æ–‡ä»¶)
  â”‚              â”œâ”€ install_nginx()
  â”‚              â”œâ”€ configure_nginx_vhost_include() â­
  â”‚              â””â”€ create_nginx_vhost()
  â”‚
  â”œâ”€ requires â”€â†’ lib/trojan.sh
  â”‚              â”œâ”€ depends on: ssl.sh (è¯ä¹¦æ–‡ä»¶)
  â”‚              â”œâ”€ install_trojan()
  â”‚              â””â”€ create_trojan_config()
  â”‚
  â””â”€ requires â”€â†’ lib/service.sh
                 â”œâ”€ depends on: nginx.sh (æœåŠ¡æ–‡ä»¶)
                 â”œâ”€ depends on: trojan.sh (æœåŠ¡æ–‡ä»¶)
                 â”œâ”€ start_services()
                 â””â”€ health_check()
```

## ğŸŒ éƒ¨ç½²æ‹“æ‰‘

```
                    Internet
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Port 80/443   â”‚
              â”‚  (Let's Encryptâ”‚
              â”‚   validation)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚     Nginx      â”‚  /usr/local/openresty/nginx/conf/vhost/*.conf
              â”‚  (OpenResty)   â”‚  â”œâ”€ domain.com.conf
              â”‚   Port 80/443  â”‚  â””â”€ auto included
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ WebSocket: /ws-path
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Trojan-Go    â”‚
              â”‚  Port 8443     â”‚  â† SSL: /etc/letsencrypt/live/
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ fallback
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Fake Website  â”‚
              â”‚   /var/www/    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
  â­ = æœ¬æ¬¡æ”¹è¿›çš„å…³é”®ç‚¹
  â†’ = æ•°æ®æµå‘
  â”‚ = ä¾èµ–å…³ç³»
```

## ğŸ“¦ é…ç½®æ–‡ä»¶ä½ç½®

```
/
â”œâ”€ etc/
â”‚  â”œâ”€ letsencrypt/
â”‚  â”‚  â”œâ”€ live/
â”‚  â”‚  â”‚  â””â”€ domain.com/
â”‚  â”‚  â”‚     â”œâ”€ fullchain.pem  â† Nginx & Trojan ä½¿ç”¨
â”‚  â”‚  â”‚     â”œâ”€ privkey.pem    â† Nginx & Trojan ä½¿ç”¨
â”‚  â”‚  â”‚     â””â”€ chain.pem
â”‚  â”‚  â””â”€ renewal-hooks/
â”‚  â”‚     â””â”€ deploy/
â”‚  â”‚        â””â”€ reload-services.sh  â† è¯ä¹¦æ›´æ–°åé‡è½½
â”‚  â”‚
â”‚  â”œâ”€ openresty/
â”‚  â”‚  â””â”€ vhost/
â”‚  â”‚
â”‚  â””â”€ trojan-go/
â”‚     â””â”€â”€ config.json          â† Trojan é…ç½®
â”‚
â”œâ”€ usr/
â”‚  â””â”€â”€ local/
â”‚     â”œâ”€â”€ openresty/
â”‚     â”‚  â””â”€â”€ nginx/
â”‚     â”‚     â””â”€â”€ conf/
â”‚     â”‚        â”œâ”€â”€ nginx.conf  â† include /usr/local/openresty/nginx/conf/vhost/*.conf;
â”‚     â”‚        â””â”€â”€ vhost/
â”‚     â”‚           â””â”€â”€ domain.com.conf   â† è™šæ‹Ÿä¸»æœºé…ç½®
â”‚     â”‚
â”‚     â””â”€â”€ trojan-go/
â”‚        â”œâ”€ trojan-go         â† äºŒè¿›åˆ¶æ–‡ä»¶
â”‚        â”œâ”€ config.json       â† è½¯é“¾æ¥
â”‚        â””â”€ install_info.txt  â† å®‰è£…ä¿¡æ¯
â”‚
â”œâ”€ var/
â”‚  â”œâ”€ log/
â”‚  â”‚  â”œâ”€ nginx/
â”‚  â”‚  â”‚  â””â”€ domain.com.access.log
â”‚  â”‚  â””â”€ trojan-go/
â”‚  â”‚     â””â”€ trojan-go.log
â”‚  â”‚
â”‚  â””â”€ www/
â”‚     â””â”€ domain.com/
â”‚        â””â”€ index.html        â† ä¼ªè£…ç½‘ç«™
â”‚
â””â”€ lib/
   â””â”€ systemd/
      â””â”€ system/
         â”œâ”€ nginx.service     â† Nginx æœåŠ¡
         â”œâ”€ trojan-go.service â† Trojan æœåŠ¡
         â””â”€ certbot.timer     â† è¯ä¹¦è‡ªåŠ¨ç»­æœŸ
```

## ğŸ¯ å…³é”®æ”¹è¿›ç‚¹

### 1. SSL æ¨¡å—æå‡ â­
```
ä¹‹å‰: trojan-go/lib/ssl.sh (ç‰¹å®šç»„ä»¶)
ç°åœ¨: scripts/debian12/ssl.sh (é€šç”¨æ¨¡å—)

ä¼˜åŠ¿:
âœ“ å…¶ä»–ç»„ä»¶å¯ç›´æ¥å¤ç”¨
âœ“ é¿å…ä»£ç é‡å¤
âœ“ ç»Ÿä¸€è¯ä¹¦ç®¡ç†
```

### 2. vhost ç›®å½•è§„èŒƒ â­
```
ä¹‹å‰: /usr/local/openresty/nginx/conf/vhost/
ç°åœ¨: /usr/local/openresty/nginx/conf/vhost/

ä¼˜åŠ¿:
âœ“ ç¬¦åˆ OpenResty é»˜è®¤ç»“æ„
âœ“ è‡ªåŠ¨é…ç½® nginx.conf å¼•å…¥
âœ“ æ·»åŠ æ–° vhost æ— éœ€æ‰‹åŠ¨é…ç½®
```

### 3. å¥å£®æ€§å¢å¼º â­
```
âœ“ æ‰€æœ‰å‡½æ•°å‚æ•°éªŒè¯
âœ“ æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥
âœ“ é…ç½®å¤‡ä»½å›æ»š
âœ“ ä¸‹è½½é‡è¯•æœºåˆ¶
âœ“ è¶…æ—¶æ§åˆ¶
âœ“ çŠ¶æ€éªŒè¯
```

è¿™å°±æ˜¯å®Œæ•´çš„æ¶æ„è®¾è®¡ï¼ğŸ‰
